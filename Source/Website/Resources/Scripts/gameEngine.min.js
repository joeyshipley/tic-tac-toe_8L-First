ttt={};ttt.input={};ttt.game={};ttt.input.touchclickEvent=("createTouch" in document)?"touchend":"click";ttt.game.Controller=function(){var b;var a;this.init=function(j,i){b=$.extend(j,{});a=i;a.boardPositionDisplays.bind(ttt.input.touchclickEvent,function(){c($(this))})};function c(j){var i=j.attr("id");g(i)}function g(l){var k=b.gameId;var i=l.substring(0,1);var m=l.substring(1,2);var j={GameId:k,Owner:"Human",SelectedColumn:i,SelectedRow:m};$.get(b.urls.performMove,j,function(n){h(n)})}function h(i){a.messageContainer.removeClass("error");a.messageContainer.html("Good move, try another.");d(i.MoveWarnings);var j=i.GameMoves;e(j);console.log(i);if(i.IsGameOver){if(i.IsComputerWinner){f("Game Over! The computer has won!")}if(i.IsPlayerWinner){f("Oh Noes!!! You beat the game! That really wasn't supposed to be possible.")}if(i.IsGameDraw){f("Game over! The computer has placed you in a draw match.")}}}function f(i){a.boardPositionDisplays.unbind();a.messageContainer.html(i);a.messageContainer.addClass("gameOver");a.startNewGame.removeClass("noDisplay")}function e(k){for(var l=0;l<k.length;l++){var m=k[l];var o=m.Position;var n=m.Owner;var j=$("#"+o.Column+o.Row);j.removeClass("human").removeClass("computer");j.addClass(n.toLowerCase());if(n==="Human"){j.html("O")}else{j.html("X")}}}function d(k){if(k.length===0){return}var l="";for(var j=0;j<k.length;j++){l+="<div>"+k[j].Message+"</div>"}a.messageContainer.html(l);a.messageContainer.addClass("error")}};